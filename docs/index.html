<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Look Up Distance to Coastline • distancetocoast</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="jquery.sticky-kit.min.js"></script><script src="pkgdown.js"></script><!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">distancetocoast</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    

    
    
<div class="contents">
<!-- README.md is generated from README.Rmd. Please edit that file -->
<div id="distancetocoast" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#distancetocoast" class="anchor"></a>distancetocoast</h1></div>
<p>The goal of distancetocoast is to provide an easy lookup for the “distance to coastline” for longitude and latitude coordinates.</p>
<p>Use at your own risk! Literally each of “distance”, “to” and “coast” are hard to define carefully, but often we need an easy way to find approximations.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>The distancetocoast package may be installed from Github using devtools.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">devtools<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/devtools/topics/install_github">install_github</a></span>(<span class="st">"mdsumner/distancetocoast"</span>)</code></pre></div>
</div>
<div id="example" class="section level2">
<h2 class="hasAnchor">
<a href="#example" class="anchor"></a>Example</h2>
<p>There is an in-built data set, in <code>raster</code> format. The raster package includes an <code>extract</code> function which will look up a cell value at a given longitude and latitude location.</p>
<p>This value is the distance to the coastline from the centre of the cell.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(distancetocoast)
<span class="kw">library</span>(raster)
<span class="co">#&gt; Loading required package: sp</span>
## beware of clashing with tidyr::extract
raster<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/raster/topics/extract">extract</a></span>(distance_to_coastline_lowres, <span class="kw">cbind</span>(<span class="dv">147</span>, <span class="dv">-42</span>))
<span class="co">#&gt;       </span>
<span class="co">#&gt; 65628</span></code></pre></div>
<p>This is a very approximate value, and it will depend on the content and quality of the coastline data used, on the resolution of the grid itself, some un-quantified local distortions due to coordinate transformations and discretization, and may not be accurate for some applications.</p>
<p>There will be some regions inside oceans, inside land, and inside lakes as defined by the coastline. We make no distinction for “inside” anything, this is purely distance to the line. A matching “land mask” layer could be added to provide a flag for these regions, but this is a deep can of worms …</p>
<p>This grid was created by process it in tiles, reprojecting the coastline and the grid pixel centres to a local Lambert Azimuthal Equidistant projection (<code>aeqd</code> in <a href="http://proj4.org/projections/aeqd.html">PROJ.4</a> terms) and calculating shortest Cartesian distance to the coastline coordinate in that projection. (We used the <code>nabor</code> package).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="http://www.rdocumentation.org/packages/raster/topics/plot">plot</a></span>(distance_to_coastline_lowres, <span class="dt">col =</span> viridis<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/viridis/topics/reexports">viridis</a></span>(<span class="dv">64</span>))
<span class="kw"><a href="http://www.rdocumentation.org/packages/raster/topics/plot">plot</a></span>(rnaturalearth<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/rnaturalearth/topics/ne_coastline">ne_coastline</a></span>(), <span class="dt">add =</span> <span class="ot">TRUE</span>)</code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-2-1.png" width="100%"> The in-built data can be interrogated directly for its properties.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## resolution (cell size in native coordinates)
raster<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/raster/topics/resolution">res</a></span>(distance_to_coastline_lowres)
<span class="co">#&gt; [1] 0.5 0.5</span>

## dimensions (number of columns and rows)
<span class="kw"><a href="http://www.rdocumentation.org/packages/raster/topics/dimensions">dim</a></span>(distance_to_coastline_lowres)
<span class="co">#&gt; [1] 360 720   1</span>

## the extent, in native coordinates
raster<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/raster/topics/extent">extent</a></span>(distance_to_coastline_lowres)
<span class="co">#&gt; class       : Extent </span>
<span class="co">#&gt; xmin        : -180 </span>
<span class="co">#&gt; xmax        : 180 </span>
<span class="co">#&gt; ymin        : -90 </span>
<span class="co">#&gt; ymax        : 90</span>

## the "CRS", coordinate reference system (the map projection)
raster<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/raster/topics/projection">projection</a></span>(distance_to_coastline_lowres)
<span class="co">#&gt; [1] "+init=epsg:4326 +proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0"</span>

## the range of values (distance in metres)
<span class="kw"><a href="http://www.rdocumentation.org/packages/raster/topics/cellStats">cellStats</a></span>(distance_to_coastline_lowres, min)
<span class="co">#&gt; [1] 1</span>
<span class="kw"><a href="http://www.rdocumentation.org/packages/raster/topics/cellStats">cellStats</a></span>(distance_to_coastline_lowres, max)
<span class="co">#&gt; [1] 5297879</span></code></pre></div>
<p>All of this information may be seen in one step by using the print method.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">distance_to_coastline_lowres
<span class="co">#&gt; class       : RasterLayer </span>
<span class="co">#&gt; dimensions  : 360, 720, 259200  (nrow, ncol, ncell)</span>
<span class="co">#&gt; resolution  : 0.5, 0.5  (x, y)</span>
<span class="co">#&gt; extent      : -180, 180, -90, 90  (xmin, xmax, ymin, ymax)</span>
<span class="co">#&gt; coord. ref. : +init=epsg:4326 +proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0 </span>
<span class="co">#&gt; data source : in memory</span>
<span class="co">#&gt; names       : layer </span>
<span class="co">#&gt; values      : 1, 5297879  (min, max)</span></code></pre></div>
<p>There are also higher resolution layers created from the Natural Earth coastline “50” and “10” scale coastline data sets.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ex &lt;-<span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/raster/topics/extent">extent</a></span>(<span class="dv">140</span>, <span class="dv">160</span>, <span class="dv">-60</span>, <span class="dv">-40</span>)
<span class="kw"><a href="http://www.rdocumentation.org/packages/raster/topics/plot">plot</a></span>(<span class="kw"><a href="http://www.rdocumentation.org/packages/raster/topics/crop">crop</a></span>(distance_to_coastline_<span class="dv">10</span>, ex), <span class="dt">col =</span> viridis<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/viridis/topics/reexports">viridis</a></span>(<span class="dv">64</span>))
<span class="kw"><a href="http://www.rdocumentation.org/packages/raster/topics/plot">plot</a></span>(rnaturalearth<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/rnaturalearth/topics/ne_coastline">ne_coastline</a></span>(<span class="dv">10</span>), <span class="dt">add =</span> <span class="ot">TRUE</span>)</code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-5-1.png" width="100%"></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
<span class="kw"><a href="http://www.rdocumentation.org/packages/raster/topics/plot">plot</a></span>(<span class="kw"><a href="http://www.rdocumentation.org/packages/raster/topics/crop">crop</a></span>(distance_to_coastline_<span class="dv">10</span>, <span class="kw"><a href="http://www.rdocumentation.org/packages/raster/topics/extent">extent</a></span>(<span class="dv">157</span>, <span class="dv">160</span>, <span class="dv">-57</span>, <span class="dv">-54</span>)), <span class="dt">col =</span> viridis<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/viridis/topics/reexports">viridis</a></span>(<span class="dv">64</span>))
<span class="kw"><a href="http://www.rdocumentation.org/packages/raster/topics/plot">plot</a></span>(rnaturalearth<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/rnaturalearth/topics/ne_coastline">ne_coastline</a></span>(<span class="dv">10</span>), <span class="dt">add =</span> <span class="ot">TRUE</span>)</code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-5-2.png" width="100%"></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
<span class="kw"><a href="http://www.rdocumentation.org/packages/raster/topics/extract">extract</a></span>(distance_to_coastline_<span class="dv">10</span>, <span class="kw">cbind</span>(<span class="dv">142</span>, <span class="dv">-42</span>))
<span class="co">#&gt;        </span>
<span class="co">#&gt; 241399</span>
<span class="kw"><a href="http://www.rdocumentation.org/packages/raster/topics/extract">extract</a></span>(distance_to_coastline_lowres, <span class="kw">cbind</span>(<span class="dv">142</span>, <span class="dv">-42</span>))
<span class="co">#&gt;        </span>
<span class="co">#&gt; 238327</span></code></pre></div>
<p>See ‘/data-raw/’ for the code used to produce all layer.</p>
</div>
<div id="development" class="section level2">
<h2 class="hasAnchor">
<a href="#development" class="anchor"></a>Development</h2>
<p>We hope to add more data sets with a wider choice of methods so that an appropriate choice can be made for specific applications.</p>
</div>
<div id="fun" class="section level2">
<h2 class="hasAnchor">
<a href="#fun" class="anchor"></a>Fun</h2>
<p>For a bit of fun, let’s plot as a globe (might not work on Github, but easy enough to run locally).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(quadmesh)
<span class="kw">library</span>(rgl)
<span class="kw">library</span>(proj4)

to_globe &lt;-<span class="st"> </span><span class="cf">function</span>(x, <span class="dt">fact =</span> <span class="dv">12</span>) {
  <span class="cf">if</span> (fact <span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span>) x &lt;-<span class="st"> </span>raster<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/raster/topics/aggregate">aggregate</a></span>(distance_to_coastline_lowres, <span class="dt">fact =</span> fact)
  qm &lt;-<span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/quadmesh/topics/quadmesh">quadmesh</a></span>(x)
  v &lt;-<span class="st"> </span>proj4<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/proj4/topics/transform">ptransform</a></span>( <span class="kw"><a href="http://www.rdocumentation.org/packages/raster/topics/transpose">t</a></span>(qm<span class="op">$</span>vb[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>, ]) <span class="op">*</span><span class="st"> </span>pi<span class="op">/</span><span class="dv">180</span>, 
                          raster<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/raster/topics/projection">projection</a></span>(x), 
                         <span class="st">"+proj=geocent +datum=WGS84"</span>)
  qm<span class="op">$</span>vb[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>, ] &lt;-<span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/raster/topics/transpose">t</a></span>(v)
  scl &lt;-<span class="st"> </span><span class="cf">function</span>(x) {rg &lt;-<span class="st"> </span><span class="kw">range</span>(x, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>);(x <span class="op">-</span><span class="st"> </span>rg[<span class="dv">1</span>])<span class="op">/</span><span class="kw">diff</span>(rg)}

  qm<span class="op">$</span>material &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">color =</span> <span class="kw">rep</span>(viridis<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/viridis/topics/reexports">viridis</a></span>(64L)[<span class="kw">scl</span>(raster<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/raster/topics/getValues">values</a></span>(x)) <span class="op">*</span><span class="st"> </span>63L <span class="op">+</span><span class="st"> </span><span class="dv">1</span>], <span class="dt">each =</span> <span class="dv">4</span>))
  qm
}
globe &lt;-<span class="st"> </span><span class="kw">to_globe</span>(distance_to_coastline_lowres, <span class="dt">fact =</span> <span class="dv">4</span>)
rgl<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/rgl/topics/scene">rgl.clear</a></span>()
rgl<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/rgl/topics/mesh3d">shade3d</a></span>(globe, <span class="dt">specular =</span> <span class="st">"black"</span>)

<span class="kw">library</span>(tidyverse)
<span class="co">#&gt; ── Attaching packages ──────────────────────────────────────── tidyverse 1.2.1 ──</span>
<span class="co">#&gt; ✔ ggplot2 2.2.1.9000     ✔ purrr   0.2.4     </span>
<span class="co">#&gt; ✔ tibble  1.4.2          ✔ dplyr   0.7.4     </span>
<span class="co">#&gt; ✔ tidyr   0.7.2          ✔ stringr 1.2.0     </span>
<span class="co">#&gt; ✔ readr   1.1.1          ✔ forcats 0.2.0</span>
<span class="co">#&gt; ── Conflicts ─────────────────────────────────────────── tidyverse_conflicts() ──</span>
<span class="co">#&gt; ✖ ggplot2::calc()  masks raster::calc()</span>
<span class="co">#&gt; ✖ tidyr::extract() masks raster::extract()</span>
<span class="co">#&gt; ✖ dplyr::filter()  masks stats::filter()</span>
<span class="co">#&gt; ✖ dplyr::lag()     masks stats::lag()</span>
<span class="co">#&gt; ✖ dplyr::select()  masks raster::select()</span>
<span class="kw">library</span>(spbabel)
rbind_na &lt;-<span class="st"> </span><span class="cf">function</span>(x) <span class="kw">rbind</span>(x, <span class="ot">NA</span>)
mk_lines &lt;-<span class="st"> </span><span class="cf">function</span>(x) {
  mat &lt;-<span class="st"> </span>spbabel<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/spbabel/topics/sptable">sptable</a></span>(x) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">    </span><span class="kw">split</span>(.<span class="op">$</span>branch_) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">    </span>purrr<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/purrr/topics/map">map_df</a></span>(rbind_na) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">    </span>dplyr<span class="op">::</span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/select.html">select</a></span>(x_, y_) <span class="op">%&gt;%</span><span class="st">   </span>dplyr<span class="op">::</span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/slice.html">slice</a></span>(<span class="op">-</span><span class="dv">1</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/raster/topics/as.matrix">as.matrix</a></span>()
    <span class="kw">as_tibble</span>(proj4<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/proj4/topics/transform">ptransform</a></span>( <span class="kw"><a href="http://www.rdocumentation.org/packages/raster/topics/as.matrix">as.matrix</a></span>(mat) <span class="op">*</span><span class="st"> </span>pi<span class="op">/</span><span class="dv">180</span>, 
                          raster<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/raster/topics/projection">projection</a></span>(x), 
                         <span class="st">"+proj=geocent +datum=WGS84"</span>))
}
<span class="co">#rgl.clear()</span>
rgl<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/rgl/topics/3dobjects">lines3d</a></span>(<span class="kw">mk_lines</span>(rnaturalearth<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/rnaturalearth/topics/ne_coastline">ne_coastline</a></span>()), <span class="dt">col =</span> <span class="st">"black"</span>, <span class="dt">lwd =</span> <span class="dv">3</span>)
<span class="co">#rgl::rglwidget()</span>
<span class="co">#rgl::rgl.snapshot("man/figures/globe1.png")</span></code></pre></div>
<div class="figure">
<img src="reference/figures/globe1.png" alt="globe distance"><p class="caption">globe distance</p>
</div>
<p>Please note that this project is released with a <a href="CONDUCT.md">Contributor Code of Conduct</a>. By participating in this project you agree to abide by its terms.</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2 class="hasAnchor">
<a href="#sidebar" class="anchor"></a>License</h2>
<p><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></p>
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Michael Sumner <br><small class="roles"> Author, maintainer </small> </li>
</ul>
</div>

</div>


      <footer><div class="copyright">
  <p>Developed by Michael Sumner.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
